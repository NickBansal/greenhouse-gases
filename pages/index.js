import React from 'react';
import Head from 'next/head';
import { useQuery } from 'react-query';

import http from '../services/http';
import DATA from '../constants/api';
import SearchBar from '../components/SearchBar';

export default function Home() {
  const { isLoading, data } = useQuery(
    ['getCities'],
    () => http.get({
      url: DATA.GET_DATA,
    }),
    { refetchOnWindowFocus: false },
  );

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <main className="container mx-auto">
        {isLoading && <h2>Loading...</h2>}

        {data?.error && <h2>There is an error here...</h2>}

        {data?.success && <h2 className="text-center">HELLO</h2>}

        <SearchBar handleClick={() => {}} className="mx-auto my-4 md:w-3/4" />

      </main>
    </div>
  );
}
